(function(){var d,i,a,f,g,b,c,h,e;importScripts("vortex-web-client.min.js");g=this;e=coffez;a=dds.runtime;d=false;f={};f.log=function(k){var j;j=a.WriteLog(a.EntityKind.Worker,k);return g.postMessage(j)};c={};h={};b=function(l,k){var j;j=new WebSocket(l);f.log("Created Websocket for DW at "+l);c[k]=j;h[k]=l;j.onopen=(function(m){return function(n){f.log("DW Writer Websocket is open");return g.postMessage(a.OnConnectedDataWriter(l,k))}})(this);return j.onclose=(function(m){return function(n){f.log("DW Websocket is closed");delete c[k];return g.postMessage(a.OnDisconnectedDataWriter(l,k))}})(this)};i=function(){var j,k;if(d){d=false;for(j in c){k=c[j];k.close();g.postMessage(a.OnDisconnectedDataWriter(h[j],j))}c={};return h={}}};g.onmessage=function(k){var m,n,l,j;m=k.data;switch(false){case !e.match(m.h,a.ConnectDataWriterCmd):f.log("Setting-up Socket for DW : "+m.eid+", at "+m.url);return b(m.url,m.eid);case !e.match(m.h,a.WriteDataCmd):j=c[m.eid];l=m.data;try{return j.send(l)}catch(o){n=o;f.log("Exception while sending data");return f.log(JSON.stringify(n))}break;case !e.match(m.h,a.Disconnect):return i();default:return f.log("Reader Worker Received Unknown Command!")}}}).call(this);