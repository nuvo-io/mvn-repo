(function(){var d,i,a,f,g,b,c,h,e;importScripts("vortex-web-client.min.js");g=this;e=coffez;a=dds.runtime;d=false;f={};f.log=function(k){var j;j=a.WriteLog(a.EntityKind.Worker,k);return g.postMessage(j)};c={};h={};b=function(l,k){var j;j=new WebSocket(l);f.log("Created Websocket for DR at "+l);c[k]=j;h[k]=l;j.onopen=(function(m){return function(n){f.log("DR Websocket is open");return g.postMessage(a.OnConnectedDataReader(l,k))}})(this);j.onclose=(function(m){return function(n){f.log("DR Websocket is closed");delete c[k];delete h[k];return g.postMessage(a.OnDisconnectedDataReader(l,k))}})(this);return j.onmessage=(function(m){return function(n){n=a.OnDataAvailable(n.data,k);return g.postMessage(a.OnDataAvailable(n.data,k))}})(this)};i=function(){var j,k;if(d){d=false;for(j in c){k=c[j];k.close();g.postMessage(OnDisconnectedDataReader(h[j],j))}c={};return h={}}};g.onmessage=function(j){var k;k=j.data;switch(false){case !e.match(k.h,a.ConnectDataReaderCmd):f.log("Setting-up Socket for : "+k.eid+", at "+k.url);return b(k.url,k.eid);case !e.match(k.h,a.Connect):return connect();case !e.match(k.h,a.Disconnect):return i();default:return f.log("Reader Worker Received Unknown Command!")}}}).call(this);